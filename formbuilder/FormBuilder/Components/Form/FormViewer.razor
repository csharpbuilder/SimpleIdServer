@using FormBuilder.Helpers
@using System.Text.Json.Nodes
@using global::FormBuilder.Models
@inject IRenderFormElementsHelper renderFormsElementsHelper

@if(Form.Elements != null)
{
    @CustomRender
}

@code {
    private RenderFragment? CustomRender { get; set; }
    [Parameter] public FormRecord Form { get; set; }
    [Parameter] public JsonObject Input { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        CustomRender = CreateComponent();
    }

    private void Init()
    {
        Form.Elements
    }

    private RenderFragment CreateComponent() => builder =>
    {
        renderFormsElementsHelper.Render(builder, Form.Elements);
    };
}