@using Blazor.Diagrams.Components.Renderers


@if (Node.Form.CorrelationId == Constants.EmptyStep.CorrelationId)
{
    <div class="final-step">
        <div class="toolbox">
            <RadzenButton Icon="edit" Click="HandleEdit" ButtonStyle="ButtonStyle.Primary" Size="ButtonSize.ExtraSmall" />
        </div>
        <svg width="40" height="40">
            <circle cx="20" cy="20" r="18" stroke="black" stroke-width="3" fill="black" />
        </svg>
        @foreach (var port in Node.Ports)
        {
            <PortRenderer @key="port" Port="port"></PortRenderer>
        }
    </div>
}
else
{
    <div class="step-selected">
        <div class="toolbox">
            <RadzenButton Click="HandleEdit" Icon="edit" ButtonStyle="ButtonStyle.Primary" Size="ButtonSize.ExtraSmall" />
        </div>

        <RadzenText TextStyle="TextStyle.Subtitle2">The step is <b>@Node.Form.Name</b></RadzenText>
        @foreach (var port in Node.Ports)
        {
            <PortRenderer @key="port" Port="port"></PortRenderer>
        }
    </div>
}
@code {
    [Parameter] public WorkflowStepNode Node { get; set; }

    private void HandleEdit()
    {
        if (Node.EditCb != null) Node.EditCb(Node);
    }
}
