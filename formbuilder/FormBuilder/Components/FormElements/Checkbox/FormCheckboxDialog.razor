@using System.Text.Json
@using FormBuilder.Components.Shared
@inject DialogService dialogService

<RadzenStack>
    <!-- Name -->
    <RadzenFormField Variant="Variant.Outlined" Text="Name" class="fullWidth">
        <RadzenTextBox @bind-Value="@CopyRecord.Name"></RadzenTextBox>
    </RadzenFormField>
    <EditLabelsComponent Labels="@CopyRecord.Labels" />
    <RadzenButton Text="Save" Click="@HandleSave"></RadzenButton>
</RadzenStack>

@code {
    FormCheckboxRecord CopyRecord { get; set; } = new FormCheckboxRecord();
    [Parameter] public FormCheckboxRecord Record { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        if (Record != null)
        {
            CopyRecord = JsonSerializer.Deserialize<FormCheckboxRecord>(JsonSerializer.Serialize(Record));
        }
    }

    private void HandleSave()
    {
        Record.Transformation = CopyRecord.Transformation;
        Record.Labels = CopyRecord.Labels;
        Record.Name = CopyRecord.Name;
        dialogService.Close();
    }
}