@using BlazorMonaco.Editor
@using FormBuilder.Components
@using FormBuilder.Models
@using Radzen.Blazor
@using System.Text.Json

<RadzenText>JSON</RadzenText>
<StandaloneCodeEditor Id="my-editor-instance-id" ConstructionOptions="EditorConstructionOptions" CssClass="jsonEditor" />


@code {
    [Parameter] public WorkflowContext Context { get; set; }

    private StandaloneEditorConstructionOptions EditorConstructionOptions(StandaloneCodeEditor editor)
    {
        var json = JsonSerializer.Serialize(Context.Definition.Workflow, new JsonSerializerOptions { WriteIndented = true });
        return new StandaloneEditorConstructionOptions
        {
            AutomaticLayout = true,
            Language = "json",
            Value = json
        };
    }
}
