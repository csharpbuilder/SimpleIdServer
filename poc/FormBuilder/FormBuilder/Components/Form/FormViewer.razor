@using FormBuilder.Helpers
@using global::FormBuilder.Models
@inject IRenderFormElementsHelper renderFormsElementsHelper

@if(Form.Elements != null)
{
    @CustomRender
}

@code {
    private RenderFragment? CustomRender { get; set; }
    [Parameter] public FormRecord Form { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        if(Form != null)
        {
            CustomRender = CreateComponent();
        }
    }

    private RenderFragment CreateComponent() => builder =>
    {
        renderFormsElementsHelper.Render(builder, Form.Elements);
    };
}